<input
  autocapitalize="off"
  autocomplete="off"
  matInput
  [formControl]="control"
  [matAutocomplete]="symbolAutocomplete"
/>

<mat-autocomplete
  #symbolAutocomplete="matAutocomplete"
  [displayWith]="displayFn"
  (optionSelected)="onUpdateSymbol($event)"
>
  @if (!isLoading) {
    @for (lookupItem of filteredLookupItems; track lookupItem) {
      <mat-option
        class="line-height-1"
        [disabled]="lookupItem.dataProviderInfo.isPremium"
        [value]="lookupItem"
      >
        <span class="align-items-center d-flex line-height-1"
          ><b>{{ lookupItem.name }}</b>
          @if (lookupItem.dataProviderInfo.isPremium) {
            <gf-premium-indicator class="ml-1" [enableLink]="false" />
          }
        </span>
        <small class="text-muted"
          >{{ lookupItem.symbol | gfSymbol }} · {{ lookupItem.currency }}
          @if (lookupItem.assetSubClass) {
            · {{ lookupItem.assetSubClassString }}
          }
        </small>
      </mat-option>
    }
  }
</mat-autocomplete>

@if (isLoading) {
  <mat-spinner class="position-absolute" [diameter]="20" />
}
